#!/bin/bash

function xfind()
{
    find . -name .repo -prune -o -name .git -prune -o  -type f -name "*$@*" -print
}

function xfindi()
{
    find . -name .repo -prune -o -name .git -prune -o  -type f -iname "*$@*" -print
}

function jgrep()
{
    find . -name .repo -prune -o -name .git -prune -o  -type f -name "*\.java" -print0 | xargs -0 grep --color -n "$@"
}

function jgrepi()
{
    find . -name .repo -prune -o -name .git -prune -o  -type f -name "*\.java" -print0 | xargs -0 grep -i --color -n "$@"
}

function cgrep()
{
    find . -name .repo -prune -o -name .git -prune -o -type f \( -name '*.c' -o -name '*.cc' -o -name '*.cpp' -o -name '*.h' \) -print0 | xargs -0 grep --color -n "$@"
}

function cgrepi()
{
    find . -name .repo -prune -o -name .git -prune -o -type f \( -name '*.c' -o -name '*.cc' -o -name '*.cpp' -o -name '*.h' \) -print0 | xargs -0 grep -i --color -n "$@"
}

function resgrep()
{
    for dir in `find . -name .repo -prune -o -name .git -prune -o -name res -type d`; do find $dir -type f -name '*\.xml' -print0 | xargs -0 grep --color -n "$@"; done;
}

function resgrepi()
{
    for dir in `find . -name .repo -prune -o -name .git -prune -o -name res -type d`; do find $dir -type f -name '*\.xml' -print0 | xargs -0 grep -i --color -n "$@"; done;
}

# Makefile
function mgrep()
{
    find . -name .repo -prune -o -name .git -prune -o  -type f \( -name "Makefile" -o -name '*.mk' \) -print0 | xargs -0 grep --color -n "$@"
}

function mgrepi()
{
    find . -name .repo -prune -o -name .git -prune -o  -type f \( -name "Makefile" -o -name '*.mk' \) -print0 | xargs -0 grep -i --color -n "$@"
}

# pdf
function pgrep()
{
    find . -name '*.pdf' -print -exec pdftotext {} /tmp/tmp.txt \; -exec grep --color "$@" /tmp/tmp.txt \;
}

function pgrepi()
{
    find . -name '*.pdf' -print -exec pdftotext {} /tmp/tmp.txt \; -exec grep -i --color "$@" /tmp/tmp.txt \;
}

function xgrep()
{
    find . -name .repo -prune -o -name .git -prune -o  -type f -name "*" -print0 | xargs -0 grep --color -n "$@"
}

function xgrepi()
{
	find . -name .repo -prune -o -name .git -prune -o  -type f -name "*" -print0 | xargs -0 grep -i --color -n "$@"
}

case $1 in
	c)
		shift
		cgrep "$@"
		;;
	ci)
		shift
		cgrepi "$@"
		;;
	t)
		shift
		xgrep "$@"
		;;
	ti)
		shift
		xgrepi "$@"
		;;
	m)
		shift
		mgrep "$@"
		;;
	mi)
		shift
		mgrepi "$@"
		;;
	x)
		shift
		xfind "$@"
		;;
	xi)
		shift
		xfindi "$@"
		;;

	*)
		echo "lfind c  <arg>:   c file"
		echo "lfind ci <arg>:   c file"
		echo "lfind t  <arg>:   text"
		echo "lfind ti <arg>:   text"
		echo "lfind m  <arg>:   makefile"
		echo "lfind mi <arg>:   makefile"
		echo "lfind x  <arg>:   file name"
		echo "lfind xi <arg>:   file name"
		;;
esac
